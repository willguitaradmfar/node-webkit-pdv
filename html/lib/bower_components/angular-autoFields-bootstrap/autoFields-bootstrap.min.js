"use strict";angular.module("autofields.bootstrap",["autofields.standard","ui.bootstrap"]).config(["$autofieldsProvider",function(e){e.settings.classes.container.push("form-group");e.settings.classes.input.push("form-control");e.settings.classes.label.push("control-label");e.registerHandler("checkbox",function(t,n,r){var i=e.field(t,n,"<input/>");if(i.label)i.label.prepend(i.input);i.input.removeClass("form-control");return i.fieldContainer});e.settings.dateSettings={showWeeks:false,datepickerPopup:"MMMM dd, yyyy"};e.settings.scope.datepickerOptions={showWeeks:false};e.settings.scope.openCalendar=function(e,t,n){n.preventDefault();n.stopPropagation();e[t]=!e[t]};e.registerHandler("date",function(t,n,r){var i=n.showWeeks?n.showWeeks:t.options.dateSettings.showWeeks;var s=n.datepickerPopup?n.datepickerPopup:t.options.dateSettings.datepickerPopup;var o={type:"text",showWeeks:i,datepickerPopup:s,datepickerOptions:"datepickerOptions",isOpen:"$property_cleanOpen"};n.addons=[{button:true,icon:"glyphicon glyphicon-calendar",attr:{ngClick:'openCalendar("$property_cleanOpen",$event)'}}];var u=e.field(t,n,"<input/>",o);return u.fieldContainer});e.registerHandler("static",function(t,n,r){var i=n.showWeeks?n.showWeeks:t.options.dateSettings.showWeeks;var s=n.datepickerPopup?n.datepickerPopup:t.options.dateSettings.datepickerPopup;var o=e.field(t,n,"<p/>");var u=angular.element("<p/>");u.attr("ng-bind",o.input.attr("ng-model"));u.addClass("form-control-static");o.input.replaceWith(u);return o.fieldContainer});e.settings.classes.row=e.settings.classes.row||[];e.settings.classes.row.push("row");e.settings.classes.col=e.settings.classes.col||[];e.settings.classes.col.push("col-sm-$size");e.settings.classes.colOffset=e.settings.classes.colOffset||[];e.settings.classes.colOffset.push("col-sm-offset-$size");e.registerHandler("multiple",function(t,n,r){var i=angular.element("<div/>");i.addClass(t.options.classes.row.join(" "));angular.forEach(n.fields,function(r,s){var o=angular.element("<div/>");var u=r.type!="multiple"?r.columns||n.columns:n.columns;o.addClass(t.options.classes.col.join(" ").replace(/\$size/g,u));o.append(e.createField(t,r,s));i.append(o)});return i});e.settings.classes.helpBlock=e.settings.classes.helpBlock||[];e.settings.classes.helpBlock.push("help-block");e.registerMutator("helpBlock",function(e,t,n){if(!t.help)return n;n.helpBlock=angular.element("<p/>");n.helpBlock.addClass(e.options.classes.helpBlock.join(" "));n.helpBlock.html(t.help);n.fieldContainer.append(n.helpBlock);return n});e.settings.classes.inputGroup=["input-group"];e.settings.classes.inputGroupAddon=["input-group-addon"];e.settings.classes.inputGroupAddonButton=["input-group-btn"];e.settings.classes.button=["btn","btn-default"];e.registerMutator("addons",function(t,n,r){if(!n.addons)return r;r.inputGroup=angular.element("<div/>");r.inputGroup.addClass(e.settings.classes.inputGroup.join(" "));var i=[];angular.forEach(n.addons,function(s){var o=angular.element("<span/>"),u=null;o.addClass(e.settings.classes.inputGroupAddon.join(" "));if(s.button){o.attr("class",e.settings.classes.inputGroupAddonButton.join(" "));u=angular.element('<button type="button"/>');u.addClass(e.settings.classes.button.join(" "));o.append(u)}if(s.icon!=null){var a=angular.element("<i/>");a.addClass(s.icon);(u||o).append(a)}if(s.content!=null)(u||o).html(s.content);if(s.attr)e.setAttributes(t,n,u||o,s.attr);if(s.before)r.inputGroup.append(o);else i.push(o)});r.inputGroup.append(r.input);angular.forEach(i,function(e){r.inputGroup.append(e)});r.fieldContainer.append(r.inputGroup);return r});e.settings.layout={type:"basic",labelSize:2,inputSize:10};e.registerMutator("horizontalForm",function(t,n,r){if(!(t.options.layout&&t.options.layout.type=="horizontal")){t.container.removeClass("form-horizontal");return r}var i=e.settings.classes.col[0];var s=e.settings.classes.colOffset[0];var o=n.labelSize?n.labelSize:t.options.layout.labelSize;var u=n.inputSize?n.inputSize:t.options.layout.inputSize;t.container.addClass("form-horizontal");var a=angular.element("<div/>");a.addClass(i.replace(/\$size/gi,u));if(r.label&&n.type!="checkbox"){r.label.addClass(i.replace(/\$size/gi,o));r.label.after(a)}else{r.fieldContainer.prepend(a);a.addClass(s.replace(/\$size/g,o))}if(n.type=="checkbox"){r.fieldContainer.removeClass("checkbox");var f=angular.element("<div/>");f.addClass("checkbox");f.append(r.label);a.append(f)}else{a.append(r.inputGroup||r.input)}if(n.help){a.append(r.helpBlock)}return r},{require:"helpBlock"})}]);angular.module("autofields.bootstrap.validation",["autofields.validation"]).config(["$autofieldsProvider",function(e){e.settings.attributes.container.ngClass="{'has-error':"+e.settings.validation.invalid+", 'has-success':"+e.settings.validation.valid+"}";e.settings.attributes.input.popover="{{("+e.settings.validation.valid+") ? '$validMsg' : ($errorMsgs)}}";e.settings.noPopover=["date"];e.registerMutator("bootstrap-validation",function(t,n,r){if(!r.validation||e.settings.noPopover.indexOf(n.type)!=-1){r.input.removeAttr("popover");return r}if(r.msgs.length){var i=r.input.attr("popover").replace(/\$validMsg/gi,r.validMsg).replace(/\$errorMsgs/gi,r.msgs.join("+"));r.input.attr({"popover-trigger":"focus","popover-placement":"top",popover:i})}else{r.input.removeAttr("popover")}return r},{require:"validation",override:true})}]);angular.module("autofields",["autofields.bootstrap","autofields.bootstrap.validation"])